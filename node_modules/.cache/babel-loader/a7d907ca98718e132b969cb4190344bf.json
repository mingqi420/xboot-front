{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\authorize.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\authorize.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IENvb2tpZXMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IHsgaW5pdENhcHRjaGEsIGRyYXdDb2RlSW1hZ2UgfSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCB7IGF1dGhvcml6ZSwgYXV0aG9yaXplZCB9IGZyb20gIkAvYXBpL29wZW4iOwppbXBvcnQgSGVhZGVyIGZyb20gIkAvdmlld3MvbWFpbi1jb21wb25lbnRzL2hlYWRlciI7CmltcG9ydCBGb290ZXIgZnJvbSAiQC92aWV3cy9tYWluLWNvbXBvbmVudHMvZm9vdGVyIjsKaW1wb3J0IExhbmdTd2l0Y2ggZnJvbSAiQC92aWV3cy9tYWluLWNvbXBvbmVudHMvbGFuZy1zd2l0Y2giOwppbXBvcnQgUmVjdExvYWRpbmcgZnJvbSAiQC92aWV3cy9teS1jb21wb25lbnRzL3hib290L3JlY3QtbG9hZGluZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYW5nU3dpdGNoOiBMYW5nU3dpdGNoLAogICAgSGVhZGVyOiBIZWFkZXIsCiAgICBGb290ZXI6IEZvb3RlciwKICAgIFJlY3RMb2FkaW5nOiBSZWN0TG9hZGluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF1dGhMb2FkaW5nOiBmYWxzZSwKICAgICAgdGl0bGU6ICIiLAogICAgICBtc2c6ICIiLAogICAgICBlcnJvcjogZmFsc2UsCiAgICAgIGxvYWRpbmdDYXB0Y2hhOiB0cnVlLAogICAgICBjYXB0Y2hhSW1nOiAiIiwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIGNvZGU6ICIiLAogICAgICAgIGNsaWVudF9pZDogIiIsCiAgICAgICAgcmVkaXJlY3RfdXJpOiAiIiwKICAgICAgICBzdGF0ZTogIiIsCiAgICAgICAgcmVzcG9uc2VfdHlwZTogIiIsCiAgICAgICAgY2FwdGNoYUlkOiB0aGlzLmNhcHRjaGFJZAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6LSm5Y+35LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5a+G56CB5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLpqozor4HnoIHkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGp1ZGdlVXJsOiBmdW5jdGlvbiBqdWRnZVVybCgpIHsKICAgICAgdmFyIHEgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKCiAgICAgIGlmICghcS5jbGllbnRfaWQpIHsKICAgICAgICB0aGlzLnRpdGxlID0gIuWPguaVsGNsaWVudF9pZOmdnuazlSI7CiAgICAgICAgdGhpcy5tc2cgPSAiVGhlIHBhcmFtZXRlciBjbGllbnRfaWQgaXMgaWxsZWdhbC4iOwogICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFxLnJlZGlyZWN0X3VyaSkgewogICAgICAgIHRoaXMudGl0bGUgPSAi5Y+C5pWwcmVkaXJlY3RfdXJp6Z2e5rOVIjsKICAgICAgICB0aGlzLm1zZyA9ICJUaGUgcGFyYW1ldGVyIHJlZGlyZWN0X3VyaSBpcyBpbGxlZ2FsLiI7CiAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXEuc3RhdGUpIHsKICAgICAgICB0aGlzLnRpdGxlID0gIuWPguaVsHN0YXRl6Z2e5rOVIjsKICAgICAgICB0aGlzLm1zZyA9ICJUaGUgcGFyYW1ldGVyIHN0YXRlIGlzIGlsbGVnYWwuIjsKICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybS5jbGllbnRfaWQgPSBxLmNsaWVudF9pZDsKICAgICAgdGhpcy5mb3JtLnJlZGlyZWN0X3VyaSA9IHEucmVkaXJlY3RfdXJpOwogICAgICB0aGlzLmZvcm0uc3RhdGUgPSBxLnN0YXRlOwogICAgICB0aGlzLmZvcm0ucmVzcG9uc2VUeXBlID0gcS5yZXNwb25zZVR5cGU7CiAgICB9LAogICAgZ2V0Q2FwdGNoYUltZzogZnVuY3Rpb24gZ2V0Q2FwdGNoYUltZygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZ0NhcHRjaGEgPSB0cnVlOwogICAgICBpbml0Q2FwdGNoYSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmdDYXB0Y2hhID0gZmFsc2U7CgogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMuZm9ybS5jYXB0Y2hhSWQgPSByZXMucmVzdWx0OwogICAgICAgICAgX3RoaXMuY2FwdGNoYUltZyA9IGRyYXdDb2RlSW1hZ2UgKyByZXMucmVzdWx0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5sb2dpbkZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczIubG9hZGluZyA9IHRydWU7CiAgICAgICAgICBhdXRob3JpemUoX3RoaXMyLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAvLyDlrZjlgqjorqTor4Hkv6Hmga8g6YG/5YWN5LiL5qyh6K6k6K+BCiAgICAgICAgICAgICAgQ29va2llcy5zZXQoIm9hdXRoVXNlcm5hbWUiLCBfdGhpczIuZm9ybS51c2VybmFtZSwgewogICAgICAgICAgICAgICAgZXhwaXJlczogMzAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzLnJlc3VsdC5yZWRpcmVjdF91cmkgKyAiP2NvZGU9IiArIHJlcy5yZXN1bHQuY29kZSArICImc3RhdGU9IiArIHJlcy5yZXN1bHQuc3RhdGU7CiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXMyLmdldENhcHRjaGFJbWcoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLmp1ZGdlVXJsKCk7IC8vIOWIpOaWreaYr+WQpuiupOivgei/hwoKICAgIHZhciB1c2VybmFtZSA9IENvb2tpZXMuZ2V0KCJvYXV0aFVzZXJuYW1lIik7CgogICAgaWYgKHVzZXJuYW1lKSB7CiAgICAgIHRoaXMuYXV0aExvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmZvcm0udXNlcm5hbWUgPSB1c2VybmFtZTsKICAgICAgYXV0aG9yaXplZCh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdmFyIHVybCA9IHJlcy5yZXN1bHQucmVkaXJlY3RfdXJpICsgIj9jb2RlPSIgKyByZXMucmVzdWx0LmNvZGUgKyAiJnN0YXRlPSIgKyByZXMucmVzdWx0LnN0YXRlOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMy5hdXRoTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5nZXRDYXB0Y2hhSW1nKCk7CiAgfQp9Ow=="},{"version":3,"sources":["authorize.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"authorize\">\n    <Row\n      type=\"flex\"\n      justify=\"center\"\n      align=\"middle\"\n      @keydown.enter.native=\"submit\"\n      style=\"height:100%\"\n    >\n      <Col class=\"layout\">\n        <div>\n          <Header />\n          <Row v-if=\"!error&&!authLoading\">\n            <Tabs value=\"1\">\n              <TabPane label=\"XBoot统一认证平台\" name=\"1\" icon=\"md-people\">\n                <Form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" class=\"form\">\n                  <FormItem prop=\"username\">\n                    <Input\n                      v-model=\"form.username\"\n                      prefix=\"ios-contact\"\n                      size=\"large\"\n                      clearable\n                      placeholder=\"请输入用户名\"\n                      autocomplete=\"off\"\n                    />\n                  </FormItem>\n                  <FormItem prop=\"password\">\n                    <Input\n                      type=\"password\"\n                      v-model=\"form.password\"\n                      prefix=\"ios-lock\"\n                      size=\"large\"\n                      clearable\n                      placeholder=\"请输入密码\"\n                      autocomplete=\"off\"\n                    />\n                  </FormItem>\n                  <FormItem prop=\"code\">\n                    <Row\n                      type=\"flex\"\n                      justify=\"space-between\"\n                      style=\"align-items: center;overflow: hidden;\"\n                    >\n                      <Input\n                        v-model=\"form.code\"\n                        size=\"large\"\n                        clearable\n                        placeholder=\"请输入图片验证码\"\n                        :maxlength=\"10\"\n                        style=\"width: 67%;\"\n                      />\n                      <div class=\"code-image\" style=\"position:relative;font-size:12px\">\n                        <Spin v-if=\"loadingCaptcha\" fix></Spin>\n                        <img\n                          :src=\"captchaImg\"\n                          @click=\"getCaptchaImg\"\n                          alt=\"加载验证码失败\"\n                          style=\"width:110px;cursor:pointer;display:block\"\n                        />\n                      </div>\n                    </Row>\n                  </FormItem>\n                </Form>\n              </TabPane>\n            </Tabs>\n            <Row>\n              <Button type=\"primary\" size=\"large\" :loading=\"loading\" @click=\"submit\" long>\n                <span v-if=\"!loading\">授权并登录</span>\n                <span v-else>授权中...</span>\n              </Button>\n            </Row>\n            <Row type=\"flex\" justify=\"space-between\" class=\"other-thing\">\n              <router-link to=\"/reset\" class=\"back\">忘记密码</router-link>\n              <router-link to=\"/regist\">\n                <a class=\"back\">还没有账号？立即注册</a>\n              </router-link>\n            </Row>\n          </Row>\n          <div v-if=\"error\" style=\"margin-top: 15vh\">\n            <Alert type=\"error\" show-icon>\n              {{title}}\n              <span slot=\"desc\">{{msg}}</span>\n            </Alert>\n          </div>\n          <div v-if=\"authLoading\">\n            <RectLoading />\n          </div>\n        </div>\n        <Footer />\n      </Col>\n      <LangSwitch />\n    </Row>\n  </div>\n</template>\n\n<script>\nimport Cookies from \"js-cookie\";\nimport { initCaptcha, drawCodeImage } from \"@/api/index\";\nimport { authorize, authorized } from \"@/api/open\";\nimport Header from \"@/views/main-components/header\";\nimport Footer from \"@/views/main-components/footer\";\nimport LangSwitch from \"@/views/main-components/lang-switch\";\nimport RectLoading from \"@/views/my-components/xboot/rect-loading\";\nexport default {\n  components: {\n    LangSwitch,\n    Header,\n    Footer,\n    RectLoading\n  },\n  data() {\n    return {\n      authLoading: false,\n      title: \"\",\n      msg: \"\",\n      error: false,\n      loadingCaptcha: true,\n      captchaImg: \"\",\n      loading: false,\n      form: {\n        username: \"\",\n        password: \"\",\n        code: \"\",\n        client_id: \"\",\n        redirect_uri: \"\",\n        state: \"\",\n        response_type: \"\",\n        captchaId: this.captchaId\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            message: \"账号不能为空\",\n            trigger: \"blur\"\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: \"密码不能为空\",\n            trigger: \"blur\"\n          }\n        ],\n        code: [\n          {\n            required: true,\n            message: \"验证码不能为空\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    };\n  },\n  methods: {\n    judgeUrl() {\n      let q = this.$route.query;\n      if (!q.client_id) {\n        this.title = \"参数client_id非法\";\n        this.msg = \"The parameter client_id is illegal.\";\n        this.error = true;\n        return;\n      }\n      if (!q.redirect_uri) {\n        this.title = \"参数redirect_uri非法\";\n        this.msg = \"The parameter redirect_uri is illegal.\";\n        this.error = true;\n        return;\n      }\n      if (!q.state) {\n        this.title = \"参数state非法\";\n        this.msg = \"The parameter state is illegal.\";\n        this.error = true;\n        return;\n      }\n      this.form.client_id = q.client_id;\n      this.form.redirect_uri = q.redirect_uri;\n      this.form.state = q.state;\n      this.form.responseType = q.responseType;\n    },\n    getCaptchaImg() {\n      this.loadingCaptcha = true;\n      initCaptcha().then(res => {\n        this.loadingCaptcha = false;\n        if (res.success) {\n          this.form.captchaId = res.result;\n          this.captchaImg = drawCodeImage + res.result;\n        }\n      });\n    },\n    submit() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          authorize(this.form).then(res => {\n            if (res.success) {\n              // 存储认证信息 避免下次认证\n              Cookies.set(\"oauthUsername\", this.form.username, {\n                expires: 30\n              });\n              let url =\n                res.result.redirect_uri +\n                \"?code=\" +\n                res.result.code +\n                \"&state=\" +\n                res.result.state;\n              window.location.href = url;\n            } else {\n              this.loading = false;\n              this.getCaptchaImg();\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    this.judgeUrl();\n    // 判断是否认证过\n    let username = Cookies.get(\"oauthUsername\");\n    if (username) {\n      this.authLoading = true;\n      this.form.username = username;\n      authorized(this.form).then(res => {\n        if (res.success) {\n          let url =\n            res.result.redirect_uri +\n            \"?code=\" +\n            res.result.code +\n            \"&state=\" +\n            res.result.state;\n          window.location.href = url;\n        } else {\n          this.authLoading = false;\n        }\n      });\n    }\n    this.getCaptchaImg();\n  }\n};\n</script>\n\n<style lang=\"less\">\n@import \"./authorize.less\";\n</style>\n"],"sourceRoot":"src/views"}]}