{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\department-tree-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\department-tree-choose.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaW5pdERlcGFydG1lbnQsIGxvYWREZXBhcnRtZW50LCBzZWFyY2hEZXBhcnRtZW50IH0gZnJvbSAiQC9hcGkvaW5kZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImRlcGFydG1lbnRUcmVlQ2hvb3NlIiwKICBwcm9wczogewogICAgbXVsdGlwbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBjbGVhcmFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIueCueWHu+mAieaLqemDqOmXqCIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkZXBMb2FkaW5nOiBmYWxzZSwKICAgICAgZGVwYXJ0bWVudFRpdGxlOiAiIiwKICAgICAgc2VhcmNoS2V5OiAiIiwKICAgICAgZGF0YURlcDogW10sCiAgICAgIHNlbGVjdERlcDogW10sCiAgICAgIGRlcGFydG1lbnRJZDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0RGVwYXJ0bWVudERhdGE6IGZ1bmN0aW9uIGluaXREZXBhcnRtZW50RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGluaXREZXBhcnRtZW50KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsKICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBlLmNoaWxkcmVuID0gW107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgewogICAgICAgICAgICAgIGUudGl0bGUgPSAiW+W3suemgeeUqF0gIiArIGUudGl0bGU7CiAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMuZGF0YURlcCA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsKICAgICAgbG9hZERlcGFydG1lbnQoaXRlbS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsKICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBlLmNoaWxkcmVuID0gW107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgewogICAgICAgICAgICAgIGUudGl0bGUgPSAiW+W3suemgeeUqF0gIiArIGUudGl0bGU7CiAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgY2FsbGJhY2socmVzLnJlc3VsdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hEZXA6IGZ1bmN0aW9uIHNlYXJjaERlcCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDmkJzntKLpg6jpl6gKICAgICAgaWYgKHRoaXMuc2VhcmNoS2V5KSB7CiAgICAgICAgdGhpcy5kZXBMb2FkaW5nID0gdHJ1ZTsKICAgICAgICBzZWFyY2hEZXBhcnRtZW50KHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnNlYXJjaEtleQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMyLmRlcExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMyLmRhdGFEZXAgPSByZXMucmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RUcmVlOiBmdW5jdGlvbiBzZWxlY3RUcmVlKHYpIHsKICAgICAgdmFyIGlkcyA9IFtdLAogICAgICAgICAgdGl0bGUgPSAiIjsKICAgICAgdi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWRzLnB1c2goZS5pZCk7CgogICAgICAgIGlmICh0aXRsZSA9PSAiIikgewogICAgICAgICAgdGl0bGUgPSBlLnRpdGxlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aXRsZSA9IHRpdGxlICsgIuOAgSIgKyBlLnRpdGxlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gaWRzOwogICAgICB0aGlzLmRlcGFydG1lbnRUaXRsZSA9IHRpdGxlOwoKICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmRlcGFydG1lbnRJZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kZXBhcnRtZW50SWRbMF0pOwogICAgICB9CiAgICB9LAogICAgY2xlYXJTZWxlY3Q6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0KCkgewogICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IFtdOwogICAgICB0aGlzLmRlcGFydG1lbnRUaXRsZSA9ICIiOwogICAgICB0aGlzLmluaXREZXBhcnRtZW50RGF0YSgpOwoKICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCBbXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgIiIpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCJvbi1jbGVhciIpOwogICAgfSwKICAgIHNldERhdGE6IGZ1bmN0aW9uIHNldERhdGEoaWRzLCB0aXRsZSkgewogICAgICB0aGlzLmRlcGFydG1lbnRUaXRsZSA9IHRpdGxlOwoKICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IGlkczsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IFtdOwogICAgICAgIHRoaXMuZGVwYXJ0bWVudElkLnB1c2goaWRzKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kZXBhcnRtZW50SWQpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7CiAgfQp9Ow=="},{"version":3,"sources":["department-tree-choose.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div style=\"display:flex;\">\n      <Input\n        v-model=\"departmentTitle\"\n        readonly\n        style=\"margin-right:10px;\"\n        :placeholder=\"placeholder\"\n        :clearable=\"clearable\"\n        @on-clear=\"clearSelect\"\n      />\n      <Poptip transfer trigger=\"click\" placement=\"right\" title=\"选择部门\" width=\"250\">\n        <Button icon=\"md-list\">选择部门</Button>\n        <div slot=\"content\">\n          <Input\n            v-model=\"searchKey\"\n            suffix=\"ios-search\"\n            @on-change=\"searchDep\"\n            placeholder=\"输入部门名搜索\"\n            clearable\n          />\n          <div class=\"dep-tree-bar\">\n            <Tree\n              :data=\"dataDep\"\n              :load-data=\"loadData\"\n              @on-select-change=\"selectTree\"\n              :multiple=\"multiple\"\n            ></Tree>\n            <Spin size=\"large\" fix v-if=\"depLoading\"></Spin>\n          </div>\n        </div>\n      </Poptip>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { initDepartment, loadDepartment, searchDepartment } from \"@/api/index\";\nexport default {\n  name: \"departmentTreeChoose\",\n  props: {\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    clearable: {\n      type: Boolean,\n      default: true\n    },\n    placeholder: {\n      type: String,\n      default: \"点击选择部门\"\n    }\n  },\n  data() {\n    return {\n      depLoading: false,\n      departmentTitle: \"\",\n      searchKey: \"\",\n      dataDep: [],\n      selectDep: [],\n      departmentId: []\n    };\n  },\n  methods: {\n    initDepartmentData() {\n      initDepartment().then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          this.dataDep = res.result;\n        }\n      });\n    },\n    loadData(item, callback) {\n      loadDepartment(item.id).then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          callback(res.result);\n        }\n      });\n    },\n    searchDep() {\n      // 搜索部门\n      if (this.searchKey) {\n        this.depLoading = true;\n        searchDepartment({ title: this.searchKey }).then(res => {\n          this.depLoading = false;\n          if (res.success) {\n            res.result.forEach(function(e) {\n              if (e.status == -1) {\n                e.title = \"[已禁用] \" + e.title;\n                e.disabled = true;\n              }\n            });\n            this.dataDep = res.result;\n          }\n        });\n      } else {\n        this.initDepartmentData();\n      }\n    },\n    selectTree(v) {\n      let ids = [],\n        title = \"\";\n      v.forEach(e => {\n        ids.push(e.id);\n        if (title == \"\") {\n          title = e.title;\n        } else {\n          title = title + \"、\" + e.title;\n        }\n      });\n      this.departmentId = ids;\n      this.departmentTitle = title;\n      if (this.multiple) {\n        this.$emit(\"on-change\", this.departmentId);\n      } else {\n        this.$emit(\"on-change\", this.departmentId[0]);\n      }\n    },\n    clearSelect() {\n      this.departmentId = [];\n      this.departmentTitle = \"\";\n      this.initDepartmentData();\n      if (this.multiple) {\n        this.$emit(\"on-change\", []);\n      } else {\n        this.$emit(\"on-change\", \"\");\n      }\n      this.$emit(\"on-clear\");\n    },\n    setData(ids, title) {\n      this.departmentTitle = title;\n      if (this.multiple) {\n        this.departmentId = ids;\n      } else {\n        this.departmentId = [];\n        this.departmentId.push(ids);\n      }\n      this.$emit(\"on-change\", this.departmentId);\n    }\n  },\n  created() {\n    this.initDepartmentData();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.dep-tree-bar {\n  position: relative;\n  min-height: 80px;\n  max-height: 500px;\n  overflow: auto;\n  margin-top: 5px;\n}\n\n.dep-tree-bar::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.dep-tree-bar::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  -webkit-box-shadow: inset 0 0 2px #d1d1d1;\n  background: #e4e4e4;\n}\n</style>\n\n"],"sourceRoot":"src/views/my-components/xboot"}]}