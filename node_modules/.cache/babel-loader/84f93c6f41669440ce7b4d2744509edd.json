{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\file-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\file-upload.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdXBsb2FkRmlsZSB9IGZyb20gIkAvYXBpL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaWxlVXBsb2FkIiwKICBwcm9wczogewogICAgdmFsdWU6IE9iamVjdCwKICAgIHNpemU6IFN0cmluZywKICAgIHR5cGU6IFN0cmluZywKICAgIGdob3N0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBzaGFwZTogU3RyaW5nLAogICAgaWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJpb3MtY2xvdWQtdXBsb2FkLW91dGxpbmUiCiAgICB9LAogICAgdGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICLkuIrkvKDmlofku7YiCiAgICB9LAogICAgbWF4U2l6ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDUKICAgIH0sCiAgICBhY2NlcHQ6IFN0cmluZwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KCkgewogICAgICBpZiAodGhpcy5hY2NlcHQpIHsKICAgICAgICB2YXIgZm9ybWF0ID0gW107CiAgICAgICAgdGhpcy5hY2NlcHQuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBmb3JtYXQucHVzaChlLnJlcGxhY2UoIi4iLCAiIikucmVwbGFjZSgiICIsICIiKSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZvcm1hdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2Nlc3NUb2tlbjoge30sCiAgICAgIHRpdGxlOiAi54K55Ye75LiL6L29IiwKICAgICAgY3VycmVudFZhbHVlOiB0aGlzLnZhbHVlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdXBsb2FkRmlsZVVybDogdXBsb2FkRmlsZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7CiAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIikKICAgICAgfTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoKSB7CiAgICAgIGlmICghdGhpcy5jdXJyZW50VmFsdWUudXJsKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5peg5pWI55qE6ZO+5o6lIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB3aW5kb3cub3Blbih0aGlzLmN1cnJlbnRWYWx1ZS51cmwgKyAiP2F0dG5hbWU9JnJlc3BvbnNlLWNvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0mZmlsZW5hbWU9IiArIHRoaXMuY3VycmVudFZhbHVlLm5hbWUpOwogICAgfSwKICAgIGhhbmRsZUZvcm1hdEVycm9yOiBmdW5jdGlvbiBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7CiAgICAgICAgdGl0bGU6ICLkuI3mlK/mjIHnmoTmlofku7bmoLzlvI8iLAogICAgICAgIGRlc2M6ICLmiYDpgInmlofku7bigJggIiArIGZpbGUubmFtZSArICIg4oCZ5qC85byP5LiN5q2j56GuLCDor7fpgInmi6kgIiArIHRoaXMuYWNjZXB0ICsgIiDmoLzlvI/mlofku7YiCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU1heFNpemU6IGZ1bmN0aW9uIGhhbmRsZU1heFNpemUoZmlsZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwKICAgICAgICBkZXNjOiAi5omA6YCJ5paH5Lu24oCYICIgKyBmaWxlLm5hbWUgKyAiIOKAmeWkp+Wwj+i/h+Wkpywg5LiN5b6X6LaF6L+HICIgKyB0aGlzLm1heFNpemUgKyAiTS4iCiAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gewogICAgICAgICAgdXJsOiByZXMucmVzdWx0LAogICAgICAgICAgbmFtZTogZmlsZS5uYW1lLAogICAgICAgICAgc2l6ZTogZmlsZS5zaXplCiAgICAgICAgfTsKICAgICAgICB0aGlzLnRpdGxlID0gIueCueWHu+S4i+i9vSgiICsgKGZpbGUuc2l6ZSAqIDEuMCAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMikgKyAiIE1CKSI7CiAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnJvci50b1N0cmluZygpKTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSh2KSB7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICB9LAogICAgc2V0Q3VycmVudFZhbHVlOiBmdW5jdGlvbiBzZXRDdXJyZW50VmFsdWUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSB0aGlzLmN1cnJlbnRWYWx1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWx1ZTsKCiAgICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZS5zaXplKSB7CiAgICAgICAgdGhpcy50aXRsZSA9ICLngrnlh7vkuIvovb0oIiArICh0aGlzLmN1cnJlbnRWYWx1ZS5zaXplICogMS4wIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICIgTUIpIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRpdGxlID0gIueCueWHu+S4i+i9vSI7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuY3VycmVudFZhbHVlKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodmFsKSB7CiAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHZhbCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["file-upload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"file-upload-wrap\">\n      <Upload\n        :action=\"uploadFileUrl\"\n        :headers=\"accessToken\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :format=\"format\"\n        :accept=\"accept\"\n        :max-size=\"maxSize*1024\"\n        :on-format-error=\"handleFormatError\"\n        :on-exceeded-size=\"handleMaxSize\"\n        :before-upload=\"beforeUpload\"\n        :show-upload-list=\"false\"\n        class=\"file-upload\"\n      >\n        <Button\n          :loading=\"loading\"\n          :type=\"type\"\n          :ghost=\"ghost\"\n          :shape=\"shape\"\n          :size=\"size\"\n          :disabled=\"disabled\"\n          :icon=\"icon\"\n        >{{text}}</Button>\n      </Upload>\n      <Tooltip transfer :content=\"title\" placement=\"top\">\n        <a @click=\"download\">{{currentValue.name}}</a>\n      </Tooltip>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { uploadFile } from \"@/api/index\";\nexport default {\n  name: \"fileUpload\",\n  props: {\n    value: Object,\n    size: String,\n    type: String,\n    ghost: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    shape: String,\n    icon: {\n      type: String,\n      default: \"ios-cloud-upload-outline\"\n    },\n    text: {\n      type: String,\n      default: \"上传文件\"\n    },\n    maxSize: {\n      type: Number,\n      default: 5\n    },\n    accept: String\n  },\n  computed: {\n    format() {\n      if (this.accept) {\n        let format = [];\n        this.accept.split(\",\").forEach(e => {\n          format.push(e.replace(\".\", \"\").replace(\" \", \"\"));\n        });\n        return format;\n      } else {\n        return [];\n      }\n    }\n  },\n  data() {\n    return {\n      accessToken: {},\n      title: \"点击下载\",\n      currentValue: this.value,\n      loading: false,\n      uploadFileUrl: uploadFile\n    };\n  },\n  methods: {\n    init() {\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n    },\n    download() {\n      if (!this.currentValue.url) {\n        this.$Message.error(\"无效的链接\");\n        return;\n      }\n      window.open(\n        this.currentValue.url +\n          \"?attname=&response-content-type=application/octet-stream&filename=\" +\n          this.currentValue.name\n      );\n    },\n    handleFormatError(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc:\n          \"所选文件‘ \" +\n          file.name +\n          \" ’格式不正确, 请选择 \" +\n          this.accept +\n          \" 格式文件\"\n      });\n    },\n    handleMaxSize(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc:\n          \"所选文件‘ \" +\n          file.name +\n          \" ’大小过大, 不得超过 \" +\n          this.maxSize +\n          \"M.\"\n      });\n    },\n    beforeUpload() {\n      this.loading = true;\n      return true;\n    },\n    handleSuccess(res, file) {\n      this.loading = false;\n      if (res.success) {\n        this.currentValue = {\n          url: res.result,\n          name: file.name,\n          size: file.size\n        };\n        this.title =\n          \"点击下载(\" +\n          ((file.size * 1.0) / (1024 * 1024)).toFixed(2) +\n          \" MB)\";\n        this.$emit(\"input\", this.currentValue);\n        this.$emit(\"on-change\", this.currentValue);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError(error, file, fileList) {\n      this.loading = false;\n      this.$Message.error(error.toString());\n    },\n    handleChange(v) {\n      this.$emit(\"input\", this.currentValue);\n      this.$emit(\"on-change\", this.currentValue);\n    },\n    setCurrentValue(value) {\n      if (value === this.currentValue) {\n        return;\n      }\n      this.currentValue = value;\n      if (this.currentValue.size) {\n        this.title =\n          \"点击下载(\" +\n          ((this.currentValue.size * 1.0) / (1024 * 1024)).toFixed(2) +\n          \" MB)\";\n      } else {\n        this.title = \"点击下载\";\n      }\n      this.$emit(\"on-change\", this.currentValue);\n    }\n  },\n  watch: {\n    value(val) {\n      this.setCurrentValue(val);\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.file-upload-wrap {\n  display: flex;\n  align-items: center;\n  .file-upload {\n    display: inline-block;\n    margin-right: 10px;\n  }\n}\n</style>\n\n"],"sourceRoot":"src/views/my-components/xboot"}]}