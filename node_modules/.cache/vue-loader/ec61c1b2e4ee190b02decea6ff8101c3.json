{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\xboot-vue-template\\new-window\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\xboot-vue-template\\new-window\\edit.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZWRpdCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsIC8vIOihqOWNleWKoOi9veeKtuaAgQogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwgLy8g6KGo5Y2V5o+Q5Lqk54q25oCBCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbmFtZTogIiIKICAgICAgfSwKICAgICAgLy8g6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dCiAgICAgIH0sCiAgICAgIGJhY2tSb3V0ZTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0KCkgewogICAgICB0aGlzLmhhbmRsZVJlc2V0KCk7CiAgICAgIHRoaXMuZm9ybS5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICB0aGlzLmJhY2tSb3V0ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmJhY2tSb3V0ZTsKICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9LAogICAgaGFuZGxlUmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGdldERhdGEoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIC8vIHRoaXMuZ2V0UmVxdWVzdCgi6K+35rGC5Zyw5Z2A77yM5aaCL2dldEJ5SWQvIiArIHRoaXMuZm9ybS5pZCkudGhlbihyZXMgPT4gewogICAgICAvLyAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAvLyAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAvLyAgICAgLy8g6L2s5o2ibnVsbOS4uiIiCiAgICAgIC8vICAgICBsZXQgdiA9IHJlcy5yZXN1bHQKICAgICAgLy8gICAgIGZvciAobGV0IGF0dHIgaW4gdikgewogICAgICAvLyAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7CiAgICAgIC8vICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgIC8vICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsKICAgICAgLy8gICAgIHRoaXMuZm9ybSA9IGRhdGE7CiAgICAgIC8vICAgfQogICAgICAvLyB9KTsKICAgICAgLy8g5qih5ouf6I635Y+W5pWw5o2u5oiQ5YqfCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5mb3JtLmlkID09ICIxIikgewogICAgICAgIHRoaXMuZm9ybS5uYW1lID0gIlhCb290IjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ubmFtZSA9ICJFeHJpY2siOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8gdGhpcy5wb3N0UmVxdWVzdCgi6K+35rGC6Lev5b6EIiwgdGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAvLyAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgLy8gICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIC8vICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIue8lui+keaIkOWKnyIpOwogICAgICAgICAgLy8gICAgIHRoaXMuY2xvc2VDdXJyZW50UGFnZSgpOwogICAgICAgICAgLy8gICB9CiAgICAgICAgICAvLyB9KTsKICAgICAgICAgIC8vIOaooeaLn+aIkOWKnwogICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIue8lui+keaIkOWKnyIpOwogICAgICAgICAgdGhpcy5jbG9zZUN1cnJlbnRQYWdlKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbPpl63lvZPliY3pobXpnaIKICAgIGNsb3NlQ3VycmVudFBhZ2UoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlVGFnIiwgImVkaXQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnBhZ2VPcGVuZWRMaXN0ID0gSlNPTi5zdHJpbmdpZnkoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYXBwLnBhZ2VPcGVuZWRMaXN0CiAgICAgICk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiB0aGlzLmJhY2tSb3V0ZQogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbpgJrov4dpZOiOt+WPluaVsOaNrgogICAgJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIGlmICh0by5uYW1lID09ICJlZGl0IikgewogICAgICAgIHRoaXMuaGFuZGxlUmVzZXQoKTsKICAgICAgICB0aGlzLmZvcm0uaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTsK"},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/xboot-vue-template/new-window","sourcesContent":["<style lang=\"less\">\n</style>\n<template>\n  <div>\n    <Card>\n      <p slot=\"title\">编辑</p>\n      <Form\n        ref=\"form\"\n        :model=\"form\"\n        :label-width=\"90\"\n        :rules=\"formValidate\"\n        style=\"position:relative\"\n      >\n        <FormItem label=\"名称\" prop=\"name\">\n          <Input v-model=\"form.name\" style=\"width: 400px\" />\n        </FormItem>\n        <Form-item>\n          <Button\n            @click=\"handleSubmit\"\n            :loading=\"submitLoading\"\n            type=\"primary\"\n            style=\"margin-right:5px\"\n          >提交并保存</Button>\n          <Button @click=\"handleReset\">重置</Button>\n        </Form-item>\n        <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n      </Form>\n    </Card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"edit\",\n  data() {\n    return {\n      loading: true, // 表单加载状态\n      submitLoading: false, // 表单提交状态\n      form: {\n        id: \"\",\n        name: \"\"\n      },\n      // 表单验证规则\n      formValidate: {\n        name: [{ required: true, message: \"不能为空\", trigger: \"blur\" }]\n      },\n      backRoute: \"\"\n    };\n  },\n  methods: {\n    init() {\n      this.handleReset();\n      this.form.id = this.$route.query.id;\n      this.backRoute = this.$route.query.backRoute;\n      this.getData();\n    },\n    handleReset() {\n      this.$refs.form.resetFields();\n    },\n    getData() {\n      this.loading = true;\n      // this.getRequest(\"请求地址，如/getById/\" + this.form.id).then(res => {\n      //   this.loading = false;\n      //   if (res.success) {\n      //     // 转换null为\"\"\n      //     let v = res.result\n      //     for (let attr in v) {\n      //       if (v[attr] == null) {\n      //         v[attr] = \"\";\n      //       }\n      //     }\n      //     let str = JSON.stringify(v);\n      //     let data = JSON.parse(str);\n      //     this.form = data;\n      //   }\n      // });\n      // 模拟获取数据成功\n      this.loading = false;\n      if (this.form.id == \"1\") {\n        this.form.name = \"XBoot\";\n      } else {\n        this.form.name = \"Exrick\";\n      }\n    },\n    handleSubmit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          // this.postRequest(\"请求路径\", this.form).then(res => {\n          //   this.submitLoading = false;\n          //   if (res.success) {\n          //     this.$Message.success(\"编辑成功\");\n          //     this.closeCurrentPage();\n          //   }\n          // });\n          // 模拟成功\n          this.submitLoading = false;\n          this.$Message.success(\"编辑成功\");\n          this.closeCurrentPage();\n        }\n      });\n    },\n    // 关闭当前页面\n    closeCurrentPage() {\n      this.$store.commit(\"removeTag\", \"edit\");\n      localStorage.pageOpenedList = JSON.stringify(\n        this.$store.state.app.pageOpenedList\n      );\n      this.$router.push({\n        name: this.backRoute\n      });\n    }\n  },\n  watch: {\n    // 监听路由变化通过id获取数据\n    $route(to, from) {\n      if (to.name == \"edit\") {\n        this.handleReset();\n        this.form.id = this.$route.query.id;\n        this.getData();\n      }\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};\n</script>"]}]}