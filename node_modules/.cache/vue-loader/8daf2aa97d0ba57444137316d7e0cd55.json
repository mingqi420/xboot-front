{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\department-tree-choose.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\xboot\\department-tree-choose.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGVwLXRyZWUtYmFyIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbWluLWhlaWdodDogODBweDsKICBtYXgtaGVpZ2h0OiA1MDBweDsKICBvdmVyZmxvdzogYXV0bzsKICBtYXJnaW4tdG9wOiA1cHg7Cn0KCi5kZXAtdHJlZS1iYXI6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICB3aWR0aDogNnB4OwogIGhlaWdodDogNnB4Owp9CgouZGVwLXRyZWUtYmFyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDJweCAjZDFkMWQxOwogIGJhY2tncm91bmQ6ICNlNGU0ZTQ7Cn0K"},{"version":3,"sources":["department-tree-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"department-tree-choose.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\n  <div>\n    <div style=\"display:flex;\">\n      <Input\n        v-model=\"departmentTitle\"\n        readonly\n        style=\"margin-right:10px;\"\n        :placeholder=\"placeholder\"\n        :clearable=\"clearable\"\n        @on-clear=\"clearSelect\"\n      />\n      <Poptip transfer trigger=\"click\" placement=\"right\" title=\"选择部门\" width=\"250\">\n        <Button icon=\"md-list\">选择部门</Button>\n        <div slot=\"content\">\n          <Input\n            v-model=\"searchKey\"\n            suffix=\"ios-search\"\n            @on-change=\"searchDep\"\n            placeholder=\"输入部门名搜索\"\n            clearable\n          />\n          <div class=\"dep-tree-bar\">\n            <Tree\n              :data=\"dataDep\"\n              :load-data=\"loadData\"\n              @on-select-change=\"selectTree\"\n              :multiple=\"multiple\"\n            ></Tree>\n            <Spin size=\"large\" fix v-if=\"depLoading\"></Spin>\n          </div>\n        </div>\n      </Poptip>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { initDepartment, loadDepartment, searchDepartment } from \"@/api/index\";\nexport default {\n  name: \"departmentTreeChoose\",\n  props: {\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    clearable: {\n      type: Boolean,\n      default: true\n    },\n    placeholder: {\n      type: String,\n      default: \"点击选择部门\"\n    }\n  },\n  data() {\n    return {\n      depLoading: false,\n      departmentTitle: \"\",\n      searchKey: \"\",\n      dataDep: [],\n      selectDep: [],\n      departmentId: []\n    };\n  },\n  methods: {\n    initDepartmentData() {\n      initDepartment().then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          this.dataDep = res.result;\n        }\n      });\n    },\n    loadData(item, callback) {\n      loadDepartment(item.id).then(res => {\n        if (res.success) {\n          res.result.forEach(function(e) {\n            if (e.isParent) {\n              e.loading = false;\n              e.children = [];\n            }\n            if (e.status == -1) {\n              e.title = \"[已禁用] \" + e.title;\n              e.disabled = true;\n            }\n          });\n          callback(res.result);\n        }\n      });\n    },\n    searchDep() {\n      // 搜索部门\n      if (this.searchKey) {\n        this.depLoading = true;\n        searchDepartment({ title: this.searchKey }).then(res => {\n          this.depLoading = false;\n          if (res.success) {\n            res.result.forEach(function(e) {\n              if (e.status == -1) {\n                e.title = \"[已禁用] \" + e.title;\n                e.disabled = true;\n              }\n            });\n            this.dataDep = res.result;\n          }\n        });\n      } else {\n        this.initDepartmentData();\n      }\n    },\n    selectTree(v) {\n      let ids = [],\n        title = \"\";\n      v.forEach(e => {\n        ids.push(e.id);\n        if (title == \"\") {\n          title = e.title;\n        } else {\n          title = title + \"、\" + e.title;\n        }\n      });\n      this.departmentId = ids;\n      this.departmentTitle = title;\n      if (this.multiple) {\n        this.$emit(\"on-change\", this.departmentId);\n      } else {\n        this.$emit(\"on-change\", this.departmentId[0]);\n      }\n    },\n    clearSelect() {\n      this.departmentId = [];\n      this.departmentTitle = \"\";\n      this.initDepartmentData();\n      if (this.multiple) {\n        this.$emit(\"on-change\", []);\n      } else {\n        this.$emit(\"on-change\", \"\");\n      }\n      this.$emit(\"on-clear\");\n    },\n    setData(ids, title) {\n      this.departmentTitle = title;\n      if (this.multiple) {\n        this.departmentId = ids;\n      } else {\n        this.departmentId = [];\n        this.departmentId.push(ids);\n      }\n      this.$emit(\"on-change\", this.departmentId);\n    }\n  },\n  created() {\n    this.initDepartmentData();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.dep-tree-bar {\n  position: relative;\n  min-height: 80px;\n  max-height: 500px;\n  overflow: auto;\n  margin-top: 5px;\n}\n\n.dep-tree-bar::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.dep-tree-bar::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  -webkit-box-shadow: inset 0 0 2px #d1d1d1;\n  background: #e4e4e4;\n}\n</style>\n\n"]}]}