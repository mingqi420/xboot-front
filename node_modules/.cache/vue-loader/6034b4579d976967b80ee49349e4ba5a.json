{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\iview-area\\al-cascader.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\my-components\\iview-area\\al-cascader.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcmVhRGF0YSBmcm9tICJhcmVhLWRhdGEvcGNhYSI7CmltcG9ydCB1dGlsIGZyb20gIi4vdXRpbC9pbmRleCI7CmNvbnN0IGxldmVsU2hvdyA9IChsZXZlbCwgY29kZSkgPT4gewogIGlmIChsZXZlbCA9PT0gMikgewogICAgcmV0dXJuIE9iamVjdC5rZXlzKGFyZWFEYXRhWyI4NiJdKS5pbmRleE9mKGNvZGUpID4gLTE7CiAgfSBlbHNlIGlmIChsZXZlbCA9PT0gMykgewogICAgcmV0dXJuIHRydWU7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFsQ2FzY2FkZXIiLAogIHByb3BzOiB7CiAgICB2YWx1ZTogQXJyYXksCiAgICBsZXZlbDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiAzLAogICAgICB2YWxpZGF0b3I6IHZhbCA9PiB7CiAgICAgICAgcmV0dXJuIHV0aWwuY2hlY2tMZXZlbChwYXJzZUludCh2YWwpKTsKICAgICAgfQogICAgfSwKICAgIGRhdGFUeXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImFsbCIsCiAgICAgIHZhbGlkYXRvcjogdmFsID0+IHsKICAgICAgICByZXR1cm4gdXRpbC5vbmVPZih2YWwsIHV0aWwuZGF0YVR5cGUpOwogICAgICB9CiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBzaXplOiBTdHJpbmcsCiAgICBwbGFjZWhvbGRlcjogU3RyaW5nLAogICAgcmVuZGVyRm9ybWF0OiBGdW5jdGlvbgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IFtdLAogICAgICBzZWxlY3Q6IFtdLAogICAgICBpc0luaXQ6IHRydWUsCiAgICAgIG9sZERhdGE6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dMZXZlbCgpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMubGV2ZWwpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgbGV0IHByb0RhdGEgPSBbXTsKICAgICAgZm9yIChjb25zdCBwIGluIGFyZWFEYXRhWyI4NiJdKSB7CiAgICAgICAgbGV0IHByb2l0ZW0gPSB7CiAgICAgICAgICB2YWx1ZTogcCwKICAgICAgICAgIGxhYmVsOiBhcmVhRGF0YVsiODYiXVtwXSwKICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMuc2hvd0xldmVsID4gMCAmJiBhcmVhRGF0YVtwXSkgewogICAgICAgICAgcHJvaXRlbS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHByb0RhdGEucHVzaChwcm9pdGVtKTsKICAgICAgfQogICAgICB0aGlzLmRhdGEgPSBwcm9EYXRhOwogICAgfSwKICAgIHNldERlZmF1bHRWYWx1ZSgpIHsKICAgICAgaWYgKHRoaXMudmFsdWVbMF0pIHsKICAgICAgICBsZXQgc2VsZWN0ID0gW107CiAgICAgICAgaWYgKGlzTmFOKHBhcnNlSW50KHRoaXMudmFsdWVbMF0pKSkgewogICAgICAgICAgbGV0IGkgPSAwOwogICAgICAgICAgbGV0IGluZGV4ID0gIiI7CiAgICAgICAgICB3aGlsZSAodGhpcy52YWx1ZVtpXSAmJiBpIDw9IHRoaXMuc2hvd0xldmVsKSB7CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgaW5kZXggPSB1dGlsLmdldEluZGV4KGFyZWFEYXRhWyI4NiJdLCB0aGlzLnZhbHVlWzBdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpbmRleCA9IHV0aWwuZ2V0SW5kZXgoYXJlYURhdGFbaW5kZXhdLCB0aGlzLnZhbHVlW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxlY3QucHVzaChpbmRleCk7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2VsZWN0ID0gc2VsZWN0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNlbGVjdCA9IHRoaXMudmFsdWU7CiAgICAgICAgfQogICAgICAgIGxldCByZXMgPSB0aGlzLnByb2Nlc1ZhbHVlKHRoaXMuc2VsZWN0KTsKICAgICAgICB0aGlzLm9sZERhdGEgPSByZXM7CiAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCByZXMpOwogICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHJlcyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLm9sZERhdGEgPSB0aGlzLnNlbGVjdCA9IFtdOwogICAgICB9CiAgICB9LAogICAgY2FuRW1pdChyZXMpIHsKICAgICAgbGV0IGlmRW1pdCA9IGZhbHNlOwogICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMCkgewogICAgICAgIGlmICh0eXBlb2YgcmVzWzBdID09PSAic3RyaW5nIikgewogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLnZhbHVlW3RoaXMudmFsdWUubGVuZ3RoIC0gMV0gIT09CiAgICAgICAgICAgIHRoaXMub2xkRGF0YVt0aGlzLm9sZERhdGEubGVuZ3RoIC0gMV0KICAgICAgICAgICkgewogICAgICAgICAgICBpZkVtaXQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMub2xkRGF0YSAmJgogICAgICAgICAgICB0aGlzLm9sZERhdGEubGVuZ3RoICE9PSAwICYmCiAgICAgICAgICAgIHRoaXMudmFsdWVbdGhpcy52YWx1ZS5sZW5ndGggLSAxXS5jb2RlICE9PQogICAgICAgICAgICAgIHRoaXMub2xkRGF0YVt0aGlzLm9sZERhdGEubGVuZ3RoIC0gMV0uY29kZQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmRW1pdCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmRW1pdCA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGlmRW1pdDsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UocmVzQXJyKSB7CiAgICAgIGxldCByZXMgPSB0aGlzLnByb2Nlc1ZhbHVlKHJlc0Fycik7CiAgICAgIHRoaXMub2xkRGF0YSA9IHJlczsKICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCByZXMpOwogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCByZXMpOwogICAgfSwKICAgIGxvYWREYXRhKGl0ZW0sIGNhbGxiYWNrKSB7CiAgICAgIGxldCBjaGlsZERhdGEgPSBbXTsKICAgICAgbGV0IGNoaWxkcyA9IGFyZWFEYXRhW2l0ZW0udmFsdWVdOwogICAgICBmb3IgKGNvbnN0IGMgaW4gY2hpbGRzKSB7CiAgICAgICAgbGV0IGNoaWxkaXRlbSA9IHsKICAgICAgICAgIHZhbHVlOiBjLAogICAgICAgICAgbGFiZWw6IGFyZWFEYXRhW2l0ZW0udmFsdWVdW2NdLAogICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgfTsKICAgICAgICBpZiAoCiAgICAgICAgICBhcmVhRGF0YVtjaGlsZGl0ZW0udmFsdWVdICYmCiAgICAgICAgICBsZXZlbFNob3codGhpcy5zaG93TGV2ZWwsIGl0ZW0udmFsdWUpCiAgICAgICAgKSB7CiAgICAgICAgICBjaGlsZGl0ZW0ubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBjaGlsZERhdGEucHVzaChjaGlsZGl0ZW0pOwogICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBjaGlsZERhdGE7CiAgICAgIH0KICAgICAgaXRlbS5sb2FkaW5nID0gZmFsc2U7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9LAogICAgcHJvY2VzVmFsdWUoYXJyKSB7CiAgICAgIGxldCBpID0gMDsKICAgICAgbGV0IHJlcyA9IFtdOwogICAgICB3aGlsZSAoYXJyW2ldKSB7CiAgICAgICAgbGV0IG5hbWUgPSAiIjsKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgbmFtZSA9IGFyZWFEYXRhWyI4NiJdW2FycltpXV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5hbWUgPSBhcmVhRGF0YVthcnJbaSAtIDFdXVthcnJbaV1dOwogICAgICAgIH0KICAgICAgICBsZXQgaXRlbTsKICAgICAgICBpZiAodGhpcy5kYXRhVHlwZSA9PT0gImFsbCIpIHsKICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgIGNvZGU6IGFycltpXSwKICAgICAgICAgICAgbmFtZTogbmFtZQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YVR5cGUgPT09ICJuYW1lIikgewogICAgICAgICAgaXRlbSA9IG5hbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0gPSBhcnJbaV07CiAgICAgICAgfQogICAgICAgIHJlcy5wdXNoKGl0ZW0pOwogICAgICAgIGkrKzsKICAgICAgfQogICAgICByZXR1cm4gcmVzOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgaWYgKHRoaXMuY2FuRW1pdCh0aGlzLnZhbHVlKSkgewogICAgICB0aGlzLnNldERlZmF1bHRWYWx1ZSgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKHZhbCkgewogICAgICBpZiAodGhpcy5jYW5FbWl0KHRoaXMudmFsdWUpKSB7CiAgICAgICAgdGhpcy5zZXREZWZhdWx0VmFsdWUoKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["al-cascader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"al-cascader.vue","sourceRoot":"src/views/my-components/iview-area","sourcesContent":["<template>\n  <div>\n    <Cascader\n      v-model=\"select\"\n      :data=\"data\"\n      :load-data=\"loadData\"\n      transfer\n      :disabled=\"disabled\"\n      :size=\"size\"\n      :placeholder=\"placeholder\"\n      :render-format=\"renderFormat\"\n      @on-change=\"handleChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport areaData from \"area-data/pcaa\";\nimport util from \"./util/index\";\nconst levelShow = (level, code) => {\n  if (level === 2) {\n    return Object.keys(areaData[\"86\"]).indexOf(code) > -1;\n  } else if (level === 3) {\n    return true;\n  }\n};\nexport default {\n  name: \"alCascader\",\n  props: {\n    value: Array,\n    level: {\n      type: [Number, String],\n      default: 3,\n      validator: val => {\n        return util.checkLevel(parseInt(val));\n      }\n    },\n    dataType: {\n      type: String,\n      default: \"all\",\n      validator: val => {\n        return util.oneOf(val, util.dataType);\n      }\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    size: String,\n    placeholder: String,\n    renderFormat: Function\n  },\n  data() {\n    return {\n      data: [],\n      select: [],\n      isInit: true,\n      oldData: []\n    };\n  },\n  computed: {\n    showLevel() {\n      return parseInt(this.level);\n    }\n  },\n  methods: {\n    init() {\n      let proData = [];\n      for (const p in areaData[\"86\"]) {\n        let proitem = {\n          value: p,\n          label: areaData[\"86\"][p],\n          children: []\n        };\n        if (this.showLevel > 0 && areaData[p]) {\n          proitem.loading = false;\n        }\n        proData.push(proitem);\n      }\n      this.data = proData;\n    },\n    setDefaultValue() {\n      if (this.value[0]) {\n        let select = [];\n        if (isNaN(parseInt(this.value[0]))) {\n          let i = 0;\n          let index = \"\";\n          while (this.value[i] && i <= this.showLevel) {\n            if (i === 0) {\n              index = util.getIndex(areaData[\"86\"], this.value[0]);\n            } else {\n              index = util.getIndex(areaData[index], this.value[i]);\n            }\n            select.push(index);\n            i++;\n          }\n          this.select = select;\n        } else {\n          this.select = this.value;\n        }\n        let res = this.procesValue(this.select);\n        this.oldData = res;\n        this.$emit(\"input\", res);\n        this.$emit(\"on-change\", res);\n      }\n      if (this.value.length == 0) {\n        this.oldData = this.select = [];\n      }\n    },\n    canEmit(res) {\n      let ifEmit = false;\n      if (this.value && this.value.length !== 0) {\n        if (typeof res[0] === \"string\") {\n          if (\n            this.value[this.value.length - 1] !==\n            this.oldData[this.oldData.length - 1]\n          ) {\n            ifEmit = true;\n          }\n        } else {\n          if (\n            this.oldData &&\n            this.oldData.length !== 0 &&\n            this.value[this.value.length - 1].code !==\n              this.oldData[this.oldData.length - 1].code\n          ) {\n            ifEmit = true;\n          }\n        }\n      } else {\n        ifEmit = true;\n      }\n      return ifEmit;\n    },\n    handleChange(resArr) {\n      let res = this.procesValue(resArr);\n      this.oldData = res;\n      this.$emit(\"input\", res);\n      this.$emit(\"on-change\", res);\n    },\n    loadData(item, callback) {\n      let childData = [];\n      let childs = areaData[item.value];\n      for (const c in childs) {\n        let childitem = {\n          value: c,\n          label: areaData[item.value][c],\n          children: []\n        };\n        if (\n          areaData[childitem.value] &&\n          levelShow(this.showLevel, item.value)\n        ) {\n          childitem.loading = false;\n        }\n        childData.push(childitem);\n        item.children = childData;\n      }\n      item.loading = false;\n      callback();\n    },\n    procesValue(arr) {\n      let i = 0;\n      let res = [];\n      while (arr[i]) {\n        let name = \"\";\n        if (i === 0) {\n          name = areaData[\"86\"][arr[i]];\n        } else {\n          name = areaData[arr[i - 1]][arr[i]];\n        }\n        let item;\n        if (this.dataType === \"all\") {\n          item = {\n            code: arr[i],\n            name: name\n          };\n        } else if (this.dataType === \"name\") {\n          item = name;\n        } else {\n          item = arr[i];\n        }\n        res.push(item);\n        i++;\n      }\n      return res;\n    }\n  },\n  mounted() {\n    this.init();\n    if (this.canEmit(this.value)) {\n      this.setDefaultValue();\n    }\n  },\n  watch: {\n    value(val) {\n      if (this.canEmit(this.value)) {\n        this.setDefaultValue();\n      }\n    }\n  }\n};\n</script>\n"]}]}