{"remainingRequest":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\sys\\actuator\\actuator.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\src\\views\\sys\\actuator\\actuator.vue","mtime":1600218271000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\dove\\project\\xboot\\xboot-front-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4vYWN0dWF0b3IubGVzcyI7Cg=="},{"version":3,"sources":["actuator.vue"],"names":[],"mappings":";AACA","file":"actuator.vue","sourceRoot":"src/views/sys/actuator","sourcesContent":["<style lang=\"less\">\n@import \"./actuator.less\";\n</style>\n<template>\n  <div class=\"search\">\n    <Card>\n      <p slot=\"title\">Spring Boot 2.x Actuator监控列表</p>\n      <Row>\n        <Table border :columns=\"columns\" :data=\"data\" ref=\"table\"></Table>\n      </Row>\n    </Card>\n\n    <Modal\n      :title=\"modalTitle\"\n      v-model=\"modalVisible\"\n      :mask-closable=\"false\"\n      :width=\"900\"\n      :fullscreen=\"full\"\n    >\n      <div style=\"position:relative\">\n        <div v-if=\"!full\" style=\"max-height:60vh;overflow:auto\">\n          <vue-json-pretty v-if=\"!full\" :data=\"jsonData\" :deep=\"deep\" showLength />\n        </div>\n        <vue-json-pretty v-if=\"full\" :data=\"jsonData\" :deep=\"deep\" showLength />\n        <Spin fix v-if=\"loading\" />\n      </div>\n      <div slot=\"footer\">\n        展开数据级数深度：\n        <InputNumber :min=\"0\" v-model=\"myDeep\" @on-change=\"changDeep\" style=\"margin-right:10px\"></InputNumber>\n        <Button @click=\"full=!full\" type=\"primary\" icon=\"md-expand\">全屏开/关</Button>\n        <Button @click=\"modalVisible=false\">关闭</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport VueJsonPretty from \"vue-json-pretty\";\nexport default {\n  name: \"actuator\",\n  components: {\n    VueJsonPretty\n  },\n  data() {\n    return {\n      loading: false,\n      modalTitle: \"\",\n      modalVisible: false,\n      full: false,\n      deep: Infinity,\n      myDeep: null,\n      jsonData: {},\n      columns: [\n        {\n          type: \"index\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"功能名称\",\n          key: \"name\",\n          sortable: true\n        },\n        {\n          title: \"URL\",\n          key: \"url\",\n          sortable: true\n        },\n        {\n          title: \"备注\",\n          key: \"description\"\n        },\n        {\n          title: \"操作\",\n          key: \"action\",\n          width: 200,\n          align: \"center\",\n          render: (h, params) => {\n            if (\n              !params.row.needPerm ||\n              this.$route.meta.permTypes.includes(\"view\")\n            ) {\n              return h(\"div\", [\n                h(\n                  \"Button\",\n                  {\n                    props: {\n                      type: \"primary\",\n                      size: \"small\",\n                      icon: \"md-eye\"\n                    },\n                    style: {\n                      marginRight: \"5px\"\n                    },\n                    on: {\n                      click: () => {\n                        this.showData(params.row);\n                      }\n                    }\n                  },\n                  \"查看数据\"\n                )\n              ]);\n            } else {\n              return h(\"div\", [\n                h(\n                  \"Button\",\n                  {\n                    props: {\n                      size: \"small\",\n                      icon: \"ios-close-circle-outline\"\n                    },\n                    style: {\n                      marginRight: \"5px\"\n                    },\n                    on: {\n                      click: () => {}\n                    }\n                  },\n                  \"您无权查看\"\n                )\n              ]);\n            }\n          }\n        }\n      ],\n      data: [\n        {\n          name: \"查看健康状态\",\n          url: \"/health\",\n          needPerm: false // 不需要查看权限\n        },\n        {\n          name: \"查看应用信息\",\n          url: \"/info\",\n          needPerm: false\n        },\n        {\n          name: \"查看环境变量\",\n          url: \"/env\",\n          needPerm: true\n        },\n        {\n          name: \"查看metrics指标\",\n          url: \"/metrics\",\n          needPerm: false\n        },\n        {\n          name: \"查看@Scheduled定时计划任务\",\n          url: \"/scheduledtasks\",\n          needPerm: false\n        },\n        {\n          name: \"查看日志文件\",\n          url: \"/logfile\",\n          description:\n            \"数据极多，最大10M，可能加载较慢甚至造成卡顿，网速不给力可能将加载超时\",\n          needPerm: true\n        },\n        {\n          name: \"查看最近100个请求\",\n          url: \"/httptrace\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看审计事件信息\",\n          url: \"/auditevents\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看线程栈\",\n          url: \"/threaddump\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看所有URL映射列表\",\n          url: \"/mappings\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看所有Spring Beans的完整列表\",\n          url: \"/beans\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看配置类和自动配置类状态\",\n          url: \"/conditions\",\n          description: \"包含被应用或未被应用的原因，数据较多，可能加载较慢\",\n          needPerm: true\n        },\n        {\n          name: \"查看所有@ConfigurationProperties的属性集合列表\",\n          url: \"/configprops\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        },\n        {\n          name: \"查看日志配置\",\n          url: \"/loggers\",\n          description: \"数据较多，可能加载较慢甚至造成卡顿\",\n          needPerm: true\n        }\n      ]\n    };\n  },\n  methods: {\n    showData(v) {\n      this.deep = Infinity;\n      this.myDeep = null;\n      this.modalVisible = true;\n      this.loading = true;\n      this.getRequest(\"/actuator\" + v.url).then(res => {\n        this.loading = false;\n        this.jsonData = res;\n      });\n      this.modalTitle = v.name + \" (搜索快捷键Ctrl+F)\";\n    },\n    changDeep(v) {\n      this.deep = v;\n    }\n  },\n  mounted() {}\n};\n</script>"]}]}